<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="logo.jpg" type="logo">
  <title>N A Agro</title>

  <style>
    * {
      box-sizing: border-box;
      user-select: none;
    }

    table tr td {
      border: 1px solid rgba(121, 121, 121, 0.678) !important;
      margin-top: 5px;

    }

    body {
      font-family: sans-serif;
      margin: 0;
      background: #f4f4f4;

    }

    .loading {
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: rgba(255, 255, 255, 0.301);
      height: 100vh;
      width: 100%;
      position: absolute;
      top: 0;
      right: 0;
    }

    .loading2 {
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: rgba(255, 255, 255, 0.301);
      position: static;
      top: 0;
      right: 0;
    }

    .loading2 img {
      height: 15px !important;
      width: 15px !important;

    }

    .productpagetable {
      display: flex;
      justify-content: center;
      align-items: center;

    }

    .productpagetable td:nth-child(2) {
      width: 150px;
      display: flex;
      gap: 5px;
      justify-content: space-around;
      align-items: center;
    }

    /* LOGIN STYLES */
    .login-container {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: #f4f4f4;
    }

    .login-box {
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      width: 80%;
      max-width: 300px;
    }

    .login-box input[type="password"] {
      width: 100%;
      padding: 12px;
      margin-bottom: 20px;
      font-size: 16px;
      border-radius: 4px;
      border: 1px solid #ccc;
    }

    .login-box button {
      width: 100%;
      padding: 12px;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 16px;
    }

    /* HOME STYLES */
    #home-section {
      display: none;
    }

    .navbar {
      display: flex;
      justify-content: center;
      align-items: center;
      background: #007bff;
      color: white;
      padding: 5px;
      height: 150px;
    }

    .navbar .logo {
      font-weight: bold;
      font-size: 18px;
    }

    .navbar .logo img {
      height: 150px;
      width: 250px;
    }

    .navbar .settings {
      font-size: 20px;
    }

    .grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      padding: 15px;
    }

    .button {
      background: white;
      text-align: center;
      border-radius: 8px;
      font-size: 14px;
      position: relative;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .button:active {
      background-color: #a2c1e2;
    }

    .large-button {
      font-size: 18px;
      padding: 30px;
    }

    .counter {
      position: absolute;
      top: 5px;
      right: 10px;
      background: red;
      color: white;
      border-radius: 50%;
      padding: 4px 8px;
      font-size: 12px;
    }

    .statement-btn {
      display: block;
      width: 90%;
      margin: 20px auto;
      padding: 15px;
      background: #28a745;
      color: white;
      text-align: center;
      border-radius: 8px;
      font-size: 18px;
      border: none;
    }

    .statement-btn:active {
      background-color: #5c5c5c !important;
    }

    .statusBox {
      /* background-color: rgb(211, 205, 205); */
      border: 2px solid rgb(128, 128, 128);
      border-radius: 25px;
      margin: 15px;
      padding: 15px;
    }

    .statusBtn {
      border: 1px solid rgb(110, 110, 110);
      border-radius: 50px;
      height: 35px;
      width: 120px;
      gap: 5px;
    }

    .popup {
      height: 98vh;
      width: 95%;
      background-color: rgb(255, 255, 255);
      z-index: 2;
      position: absolute;
      top: 15%;
      margin: 10px;
      border: 1px solid black;
      border-radius: 15px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-weight: 800;
      color: rgb(14, 14, 14);
    }

    .popup span {
      display: flex;
      flex-direction: column;
      gap: 5px;
      align-items: center;
    }

    input,
    textarea {
      border-radius: 15px;
      height: 30px;
      width: 150px;
      background-color: #bebebe;
      font-weight: 900;
      color: rgb(0, 0, 0);
      font-size: 16px;
      outline: none;
      border: none;
      padding-left: 20px !important;
      user-select: none;
    }

    .costhistory {
      /* height: 60vh; */
      width: 100%;
      display: flex;
      padding: 5px;
      font-weight: 600;
      font-size: 15px;
      overflow: auto;
      flex-direction: column;
    }
  </style>
</head>

<body>
  <!-- LOGIN SECTION -->
  <div class="login-container" id="login-section" style="display: none;">
    <div>
      <img src="logo.png" alt="logo" style="width: fit-content; height: 300px;">
    </div>
    <div class="login-box">
      <form onsubmit="return login(event)">
        <input type="password" placeholder="Enter Password" id="password" required />
        <button type="submit">Login</button>
      </form>
    </div>
  </div>


  <!-- HOME SECTION -->
  <div id="home-section" style="display: block;">
    <div class="navbar">
      <div id="logocont" class="logo"><img id="logoimg" src="logo.png" alt="N A Agro" /></div>
    </div>

    <div id="homepage">
      <div class="statusBox">
        <div style="display:  flex; flex-direction: column; gap: 5px;">
          <div style="display:  flex; gap: 5px;">
            <div class="statusBtn button" id="totalbank"><span id="totalbankspan">
                Total Bank
              </span></div>
            <div class="statusBtn button" id="totalcash"><span id="totalcashspan">Total Cash</span></div>
            <div class="statusBtn button" id="totalWithdraw"><span>Total Withdraw</span></div>
          </div>
          <div style="display: flex; gap: 5px;">
            <div class="statusBtn button" id="totalSell"><span>Total Sell</span></div>
            <div class="statusBtn button" id="totalcost"><span>Total cost</span></div>
            <div class="statusBtn button" id="totalDue"><span>Total Due</span></div>
          </div>
        </div>
      </div>

      <div></div>

      <div class="grid">
        <div class="button large-button" id="addcostbtn">
          <!-- <div class="counter">3</div> -->
          üßæ Add Cost
        </div>
        <div class="button large-button" id="addsellbtn">
          <!-- <div class="counter">7</div> -->
          üõí Add Sell
        </div>
        <div id="totalproductbtn" class="button large-button">
          <!-- <div class="counter">5</div> -->
          üìà Product list
        </div>
        <div id="addduebtn" class="button large-button">
          <!-- <div class="counter">2</div> -->
          üí∏ Add Due
        </div>
        <div id="settingbtn" class="button large-button">
          <!-- <div class="counter">2</div> -->
          ‚öôÔ∏è settings
        </div>
        <div id="notebtn" class="button large-button">
          <!-- <div class="counter">2</div> -->
          <img src="edit.svg" alt="Note edit">
          Notes
        </div>
      </div>

      <button id="logoutbtn" class="statement-btn">
        üìä Logout</button>
    </div>
  </div>


  <!-- POPUP SECTION -->

  <!-- add in bank poup -->
  <div class="popup" style="display:  none;" id="addinbankpage">
    <div class="bankAdd">
      <span>Add Blanace in Bank</span>
      <div style="display: flex; flex-direction:  column; gap: 10px; justify-content: center; align-items: center;">
        <span>
          Date:
          <input id="bankdate" type="date" data-de>
        </span>
        <span style="display:  flex;"> Amount:
          <input type="number" name="bankAmount" id="bankamount" placeholder="0.00">
        </span>
        <span style="display:  flex;"> Note:
          <input type="text" name="banknote" id="banknote" placeholder="Empty">
        </span>
        </span>
        <div style="display: flex; gap:50px; padding-top:10px ;">
          <button id="addbankdata" class="button"
            style="height: 55px; width: 75px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> Add</button>
          <button id="canceladdbankpopup" class="button"
            style="height: 55px; width: 75px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">
            Cancel</button>
        </div>
        </span>
        <div><button id="histbank" style="height: 15px;width: 30px; font-size: 9px;">hist</button></div>
      </div>
    </div>
  </div>

  <!-- add in cash popup -->
  <div class="popup" style="display: none;" id="addincashpage">
    <div class="bankAdd">
      <span>Add Blanace in Cash</span>
      <div style="display: flex; flex-direction:  column; gap: 10px; justify-content: center; align-items: center;">
        <span>
          Date:
          <input id="addcashdate" type="date">
        </span>
        <span id="" style="display:  flex;"> Amount:
          <input type="number" name="bankAmount" id="addcashamount" placeholder="0.00">
        </span>
        <span style="display:  flex;"> Note:
          <input type="text" name="bankAmount" id="addcashnote" placeholder="Empty">
        </span>
        </span>
        <div style="display: flex; gap:50px; padding-top:10px ;">
          <button id="addcashdata" class="button"
            style="height: 55px; width: 75px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"> Add</button>
          <button id="addincashcancelpopup" class="button"
            style="height: 55px; width: 75px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">
            Cancel</button>
        </div>
        </span>
        <div><button id="histcash" style="height: 15px;width: 30px; font-size: 9px;">hist</button></div>
      </div>
    </div>
  </div>

  <!-- add withdraw popup -->
  <div class="popup" style="display: none;" id="withpopuppage">
    <div class="bankAdd">
      <u><span>Add Withdraw</span></u>
      <div style="display: flex; flex-direction:  column; gap: 10px; justify-content: center; align-items: center;">
        <span>
          Date:
          <input type="date" id="withdrawdate">
        </span>
        <span style="display:  flex;"> Amount:
          <input id="withdrawamount" type="number" name="bankAmount" placeholder="0.00">
        </span>
        <span style="display:  flex;"> Note:
          <input id="withdrawnote" type="text" name="bankAmount" placeholder="Empty">
        </span>
        </span>
        <span>
          <select name="SelectWithdraw" id="SelectWithdraw">Select Withdraw:
            <option value="cash">Cash</option>
            <option value="bank">Bank</option>
          </select>
        </span>
        <div style="display: flex; gap:50px; padding-top:10px ;">
          <button class="button" id="addWithdraw"
            style="height: 55px; width: 75px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">
            Withdraw</button>
          <button id="withdrawpopupcancel" class="button"
            style="height: 55px; width: 75px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">
            Cancel</button>
        </div>
        </span>
        <div><button id="histwithdraw" style="height: 15px;width: 30px; font-size: 9px;">hist</button></div>
      </div>
    </div>
  </div>

  <!-- add new product popup -->
  <div id="addproductpopup" class="popup" style="display: none;">
    <div class="bankAdd">
      <u><span>Add product</span></u>
      <div style="display: flex; flex-direction:  column; gap: 10px; justify-content: center; align-items: center;">
        <span>
          Product Name:
          <input id="productname" type="text" placeholder="Name">
        </span>
        <span style="display:  flex;"> Quantity:
          <input type="number" name="bankAmount" id="procutquantity" placeholder="0.00">
        </span>
        </span>
        <span>
        </span>
        <div style="display: flex; gap:50px; padding-top:10px ;">
          <button class="button"
            style="height: 55px; width: 75px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"
            id="productaddlistbtn"> Add</button>
          <button id="newproductcencel" class="button"
            style="height: 55px; width: 75px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">
            Cancel</button>
        </div>
        </span>

      </div>
    </div>
  </div>

  <!-- history popup -->
  <div id="alltimehistory" class="popup" style="display: none; padding: 10px;">
    <div class="bankAdd">
      <u><span>all time history</span></u>
      <div id="totalbankamount"></div>
      <div style="display: flex; flex-direction:  column; gap: 10px; justify-content: center; align-items: center;">
        <hr>
        <div class="addPages" style="font-weight: 800; font-size: 20px">
          <div id="costHistory" class="costhistory" style="width: 95vw;">
            <div style="overflow-y: scroll; height: 45vh; margin: 10px;">
              <table id="histtable" style="width: 100%;">
                <thead>
                  <tr style="">
                    <td>Date</td>
                    <td>Note</td>
                    <td>Amount</td>
                  </tr>
                </thead>
                <tbody style="width: 100vw;">
                </tbody>
              </table>
            </div>
          </div>

        </div>
        </span>
        <div style="display: flex; gap:50px; padding-top:10px ;">
          <button id="historycencel" class="button"
            style="height: 55px; width: 75px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);">
            Cancel</button>
        </div>
        </span>

      </div>
    </div>
  </div>


  <!-- ADD PAGES SECTION -->
  <!-- add sell page -->
  <div id="addsellpage" style="display: none; flex-direction: column; justify-content: center; align-items: center;">
    <div
      style=" margin: 10px 0 20px 0; background-color: rgb(189, 189, 189); width: 100%; border: 1px solid black; padding: 10px; height: fit-content; border-radius: 15px;">
      <div style="display: flex; justify-content: space-evenly;">
        <span style="font-weight: 900; font-size: 20px;">Add A Sell Record</span>
      </div>
    </div>

    <div style="display: flex; gap: 15px; margin: 15px;">
      <span>Transaction type:</span>
      <select name="cashBank" id="sellmethod">
        <option value="cash">Cash</option>
        <option value="bank">Bank</option>
        <!-- <option value="due">Due</option> -->
      </select>
      <span>select product</span>
      <select name="cashBank" id="productselect">
      </select>
    </div>
    <div>
      <div> Date:
        <input id="selldate" type="date" style="background-color: white; padding: 3px;">
      </div>
    </div>
    <div style="margin: 10px; display: flex; align-items: center; gap: 15px;"> <span>Buyer Name</span>
      <textarea style="padding: 5px; border-radius: 15px;" name="costAddNote" id="buyername" placeholder="Buyer Name"
        cols="15" rows="1"></textarea>
    </div>
    <div style="margin: 10px; display: flex; align-items: center; gap: 15px;"> <span>Sell Details</span>
      <textarea style="padding: 5px; border-radius: 15px;" name="costAddNote" id="sellnote"
        placeholder="How Did You Sold and what you sold" cols="16" rows="3"></textarea>
    </div>
    <div style="margin: 5px;"> Total Quantity
      <input id="quantitysell" type="number" placeholder="0.00" style="background-color: white; padding: 5px;">
    </div>
    <div style="margin: 5px;"> Each Price
      <input id="eachprice" type="number" placeholder="0.00" style="background-color: white; padding: 5px;">
    </div>
    <div> Total Amount
      <input id="totalamountrechived" type="number" placeholder="0.00" style="background-color: white; padding: 5px;">
    </div>
    <div style="display: flex; justify-content: center; align-items: center; font-size: 14px; margin: 5px;">
      <span>Discounted?</span>
      <input type="checkbox" name="choice" id="discountedCheck" value="yes" style="height: 20px; width: 20px;">
    </div>
    <div style="display: flex;">
      <div id="addselldata" style="margin: 10px;" class="statement-btn"> Add
      </div>
      <div id="addsellpagecancel" style="margin: 10px; background-color: red;" class="statement-btn"> Cancel
      </div>
    </div>
    <hr>
    <div class="addPages" style="font-weight: 800; font-size: 20px; width: 100vw;">
      <div
        style=" background-color: rgb(189, 189, 189); width: 100vw; border: 1px solid black; padding: 10px; height: fit-content; border-radius: 15px;">
        <div style="display: flex; justify-content: space-evenly;">
          <span>Total Sell</span>
          <span id="totalsellhappened">0.00</span>
        </div>
      </div>
      <div id="costHistory" class="costhistory">
        <div style="width: 98vw;height: 15vw; overflow-y: scroll; display: flex; justify-content: center;">
          <table style="width: 90vw; ">
            <thead>
              <tr style="">
                <td>Date</td>
                <td>Detials</td>
                <td>Buyer</td>
                <td>Product</td>
                <td>Amount</td>
              </tr>
            </thead>
            <tbody id="tablesell">

            </tbody>
          </table>
        </div>
      </div>

    </div>
  </div>

  <!-- Total product page -->
  <div id="totalproductpage" style="display: none;">
    <div class="addPages"
      style="width: 98vw; font-weight: 800; font-size: 20px; display: flex; justify-content: center; flex-direction: column;">
      <div
        style=" background-color: rgb(189, 189, 189); width: 100%; border: 1px solid black; padding: 10px; height: fit-content; border-radius: 15px;">
        <div style="display: flex; justify-content: space-evenly;">
          <span>Products List</span>
        </div>
      </div>
      <hr>
      <div style="display: flex; align-items: center; width: 100%; justify-content: space-around;">
        <div><button id="addnewproduct" class="statement-btn" style="width: 30vw;">Add New Product</button></div>
        <div><button id="totalproductbackbtn" style="width: 30vw;" class="statement-btn">Cancel</button></div>
      </div>
      <hr>
      <div id="costHistory" class="costhistory" style="height: 50vh;">
        <div style="display: flex; flex-direction: column; justify-content: center; align-items: center;">
          <div style="display:  flex; justify-content: space-evenly; width: 48vw;">
            <span style="width: 80vw; ">Product Name</span>
            <span>Quantity</span>
          </div>
          <table style="width: 50vw; height: 60vh;">
            <tbody id="productlisttable">
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  </div>
  <!-- add Due Page -->
  <div id="addduepage" style="display: none; flex-direction: column; justify-content: center; align-items: center;">
    <div
      style=" margin: 10px 0 20px 0; background-color: rgb(189, 189, 189); width: 100%; border: 1px solid black; padding: 10px; height: fit-content; border-radius: 15px;">
      <div style="display: flex; justify-content: space-evenly;">
        <span style="font-weight: 900; font-size: 20px;">Add Due</span>
      </div>
    </div>

    <div>
      <div> Date:
        <input id="addduedate" type="date" style="background-color: white; padding: 3px;">
      </div>
    </div>
    <div style="margin: 10px; display: flex; align-items: center; gap: 15px;"> <span>Details</span>
      <textarea style="padding: 5px; border-radius: 15px;" name="costAddNote" id="addduenote"
        placeholder="Add Detils/Name" cols="15" rows="3"></textarea>
    </div>
    <div> Ttoal Amount
      <input id="adddueamount" type="number" placeholder="0.00" style="background-color: white; padding: 5px;">
    </div>
    <div style="display: flex;">
      <div id="addduedata" style="margin: 10px;" class="statement-btn"> Add
      </div>
      <div style="margin: 10px;" class="statement-btn" id="addduepagecancel"> Cancel
      </div>
    </div>
    <hr>
    <div class="addPages" style="font-weight: 800; width: 99vw; font-size: 20px">
      <div
        style=" background-color: rgb(189, 189, 189); width: 100%; border: 1px solid black; padding: 10px; height: fit-content; border-radius: 15px;">
        <div style="display: flex; justify-content: space-evenly;">
          <span>Total Due</span>
          <span style="color: red;" id="totalsuespan">500 </span>
        </div>
      </div>
      <div id="costHistory" class="costhistory"
        style="width: 99vw; display: flex; justify-content: center; align-items: center;">
        <div
          style="width: 96vw; display: flex; justify-content: center; align-items: center;height:45vh; position: relative;">
          <table style="width: 90vw; margin-top: 15px; position: absolute;top: 2%;">
            <thead>
              <tr style="">
                <td>Date</td>
                <td>Detials</td>
                <td>Amount</td>
              </tr>
            </thead>
            <tbody id="addduetable" style=""></tbody>
          </table>
        </div>
      </div>

    </div>
  </div>
  <!-- add Note page -->
  <div id="notepage" style="display: none; flex-direction: column; justify-content: center; align-items: center;">
    <div
      style=" margin: 10px 0 20px 0; background-color: rgb(189, 189, 189); width: 100%; border: 1px solid black; padding: 10px; height: fit-content; border-radius: 15px;">
      <div style="display: flex; justify-content: space-evenly;">
        <span style="font-weight: 900; font-size: 20px;">Create Note</span>
      </div>
    </div>

    <div>
      <div> Date:
        <input id="notepadDate" type="date" style="background-color: white; padding: 3px;">
      </div>
      <div style="margin-top: 10px;"> Title:
        <input id="notepadtitle" type="text" style="background-color: white; padding: 3px;" placeholder="add a title">
      </div>
    </div>
    <div style="margin: 10px; display: flex; align-items: center; gap: 15px;"> <span>Details</span>
      <textarea style="padding: 5px; border-radius: 15px;" name="costAddNote" id="notepadnote"
        placeholder="Add Detils note" cols="15" rows="3"></textarea>
    </div>

    <div style="display: flex;">
      <div id="notedataaddbtn" style="margin: 10px;" class="statement-btn"> Add
      </div>
      <div id="notepagecancelbtn" style="margin: 10px;" class="statement-btn"> Cancel
      </div>
    </div>
    <hr>
    <div class="addPages" style="font-weight: 800; font-size: 20px">
      <div
        style=" background-color: rgb(189, 189, 189); width: 100%; border: 1px solid black; padding: 10px; height: fit-content; border-radius: 15px;">
        <div style="display: flex; justify-content: space-evenly;">
          <span>Note List</span>
        </div>
      </div>
      <div id="NoteHistory" class="costhistory" style="display: flex; width: 98vw; height: 40vh;">
        <div>
          <!-- Todo/// add note title system -->
          <table style="width: 100%;">
            <thead>
              <tr style="">
                <td>Date</td>
                <td>title</td>
                <td>Details</td>
              </tr>
            </thead>
            <tbody id="notepadtablebody"></tbody>
          </table>
        </div>
      </div>

    </div>
  </div>
  <!-- add setting page -->
  <!-- Todo// pass change, reset database, logo/icon change -->
  <div id="settingpage" style="display: none; flex-direction: column; justify-content: center; align-items: center;">
    <div
      style=" margin: 10px 0 20px 0; background-color: rgb(189, 189, 189); width: 100%; border: 1px solid black; padding: 10px; height: fit-content; border-radius: 15px;">
      <div style="display: flex; justify-content: space-evenly;">
        <span style="font-weight: 900; font-size: 20px;">Setiings</span>
      </div>
    </div>
    <div style="display: flex;">
      <div style="margin: 10px;" class="statement-btn"> Save Setting
      </div>
      <div id="settingpagecancelbtn" style="margin: 10px;" class="statement-btn"> Cancel
      </div>
    </div>


  </div>

  <!-- add cost page -->
  <div id="addcostpage" style="display: none; flex-direction: column; justify-content: center; align-items: center;">
    <div
      style=" margin: 10px 0 20px 0; background-color: rgb(189, 189, 189); width: 100%; border: 1px solid black; padding: 10px; height: fit-content; border-radius: 15px;">
      <div style="display: flex; justify-content: space-evenly;">
        <span style="font-weight: 900; font-size: 20px;">Add Cost</span>
      </div>
    </div>
    <div>
      <div> Date:
        <input id="addcostdate" type="date" style="background-color: white; padding: 3px;">
      </div>

      <div style="margin: 5px;">
        <span>
          method:
        </span>
        <select name="method" id="addcostmethod">
          <option value="cash">cash</option>
          <option value="bank">bank</option>
        </select>
      </div>
    </div>
    <div style="margin: 10px; display: flex; align-items: center; gap: 15px;"> <span>Details</span>
      <textarea style="padding: 5px; border-radius: 15px;" name="costAddNote" id="costaddnote" placeholder="Add Detils"
        cols="15" rows="3"></textarea>
    </div>
    <div> Ttoal Amount
      <input id="costaddamount" type="number" placeholder="0.00" style="background-color: white; padding: 5px;">
    </div>
    <div style="display: flex;">
      <div id="addcostdata" style="margin: 10px;" class="statement-btn"> Add
      </div>
      <div style="margin: 10px;" class="statement-btn" id="addcostpagecancel"> Cancel
      </div>
    </div>
    <div id="costaddsuccess"></div>
    <hr>
    <div class="addPages" style="width: 95vw; font-weight: 800; font-size: 20px">
      <div
        style=" background-color: rgb(189, 189, 189); width: 100vw; border: 1px solid black; padding: 10px; height: fit-content; border-radius: 15px;">
        <div style="display: flex; justify-content: space-evenly;">
          <span>Total Cost</span>
          <span id="totalcost2">0.00</span>
          <img id="refreshbtn" src="/images/refresh.svg" alt="" style="width: 25px; height: 20px;">
        </div>
      </div>
      <div id="costHistory" class="costhistory" style="height: 35vh; width: 95vw;">
        <div style="width: 95vw;">
          <table style="width: 95vw;">
            <thead>
              <tr style="">
                <td>Date</td>
                <td>Detials</td>
                <td>Amount</td>
              </tr>
            </thead>
            <tbody id="costtablebody" style="width: 95vw;"></tbody>
          </table>
        </div>
      </div>

    </div>
  </div>


  <!-- SCRIPT -->
  <script>

    // windows dom loaded funciton
    window.addEventListener("DOMContentLoaded", () => {
      console.log("paged loaded")
    })



    function login(e) {
      e.preventDefault();
      const pwd = document.getElementById('password').value;
      if (pwd === "1") {
        document.getElementById("login-section").style.display = "none";
        document.getElementById("home-section").style.display = "block";
      } else {
        alert("Wrong password, Tru Again");
      }

    }

    function poster(route, data) {
      return fetch(route, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
      })
        .then(response => {
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          return response.json(); // or .text() if your server returns plain text
        })
        .then(result => {
          // console.log("Response received:", result);
          return result;
        })
        .catch(error => {
          console.error("Error in POST request:", error);
          throw error;
        });
    }

    function fetcher(route) {
      return fetch(route, {
        method: 'GET',
        headers: {
          'Accept': 'application/json'
        }
      })
        .then(response => {
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          return response.json(); // Assumes server returns JSON
        })
        .then(result => {
          return result;
        })
        .catch(error => {
          console.error("Error in GET request:", error);
          throw error;
        });
    }

    function editor(route, data) {
      return fetch(route, {
        method: 'PUT',
        headers: {
          'Content-Type': 'application/json',
          'Access-Control-Allow-Origin': '*',
          'Access-Control-Allow-Methods': 'POST,PATCH,OPTIONS'
        },
        body: JSON.stringify(data)
      })
        .then(response => {
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          return response.json();
        })
        .catch(error => {
          console.error("Error in PUT request:", error);
          throw error;
        });
    }


    loader = document.createElement("div")
    loader.setAttribute("id", "loading")
    loader.setAttribute("class", "loading")
    loader.innerHTML = `
            <div>
              <img style="height: 50px; width: 50px;" src="/images/loading.gif" alt="loading...">
            </div>
        `

    document.querySelector("#logoutbtn").addEventListener("click", () => {
      document.querySelector("#login-section").style.display = "block"
      document.querySelector("#home-section").style.display = "none"
      document.getElementById('password').value = "";
    })

    document.querySelector("#totalbank").addEventListener("click", () => {
      let b = document.querySelector("#totalbankspan")
      loader2 = document.createElement("div")
      loader2.setAttribute("id", "loading2")
      loader2.setAttribute("class", "loading2")
      loader2.innerHTML = `

              <img style="" src="/images/loading.gif" alt="loading...">

        `
      b.appendChild(loader2)

      fetcher("https://agroserver-mdz5.onrender.com/data/bank/")
        .then(data => {
          loader2.style.display = "none"
          totalAmount = 0
          data.forEach((item, index) => {
            totalAmount += parseInt(item.amount)
          });

          document.querySelector("#totalbankspan").textContent = `${totalAmount}`
          setTimeout(() => {
            document.querySelector("#totalbankspan").textContent = "Total Bank"
          }, 2000);
        })
    })

    document.querySelector("#totalbank").addEventListener("dblclick", () => {
      document.querySelector("#addinbankpage").style.display = "block"
    })
    document.querySelector("#canceladdbankpopup").addEventListener("click", () => {
      document.querySelector("#addinbankpage").style.display = "none"
    })

    document.querySelector("#totalcash").addEventListener("click", () => {
      let b = document.querySelector("#totalcashspan")
      loader2 = document.createElement("div")
      loader2.setAttribute("id", "loading2")
      loader2.setAttribute("class", "loading2")
      loader2.innerHTML = `

              <img style="" src="/images/loading.gif" alt="loading...">

        `
      b.appendChild(loader2)

      fetcher("https://agroserver-mdz5.onrender.com/data/cash/")
        .then(data => {
          loader2.style.display = "none"
          totalAmount = 0
          data.forEach((item, index) => {
            totalAmount += parseInt(item.amount)
          });

          document.querySelector("#totalcashspan").textContent = `${totalAmount}`
          setTimeout(() => {
            document.querySelector("#totalcashspan").textContent = "Total Cash"
          }, 2000);
        })
    })
    document.querySelector("#totalcash").addEventListener("dblclick", () => {
      document.querySelector("#addincashpage").style.display = "block"
    })
    document.querySelector("#addincashcancelpopup").addEventListener("click", () => {
      document.querySelector("#addincashpage").style.display = "none"
    })

    document.querySelector("#totalWithdraw").addEventListener("click", () => {
      let b = document.querySelector("#totalWithdraw")
      loader2 = document.createElement("div")
      loader2.setAttribute("id", "loading2")
      loader2.setAttribute("class", "loading2")
      loader2.innerHTML = `

              <img style="" src="/images/loading.gif" alt="loading...">

        `
      b.appendChild(loader2)

      fetcher("https://agroserver-mdz5.onrender.com/data/withdraw/")
        .then(data => {
          loader2.style.display = "none"
          totalAmount = 0
          data.forEach((item, index) => {
            totalAmount += parseInt(item.amount)
          });

          document.querySelector("#totalWithdraw").textContent = `${totalAmount}`
          setTimeout(() => {
            document.querySelector("#totalWithdraw").textContent = "Total Withdraw"
          }, 2000);
        })
    })
    document.querySelector("#totalWithdraw").addEventListener("dblclick", () => {
      document.querySelector("#withpopuppage").style.display = "block"
    })
    document.querySelector("#withdrawpopupcancel").addEventListener("click", () => {
      document.querySelector("#withpopuppage").style.display = "none"
    })

    document.querySelector("#totalSell").addEventListener("click", () => {
      total = 0
      fetcher('https://agroserver-mdz5.onrender.com/data/sell/')
        .then((data) => {
          data.forEach(d => {
            // console.log(d.amount)
            total += parseInt(d.amount)
          })
          // alert(total)
          document.querySelector("#totalSell span").textContent = total
        })
      setTimeout(() => {
        document.querySelector("#totalSell span").textContent = "Total Sell"
      }, 2000);
    })
    document.querySelector("#totalcost").addEventListener("click", () => {
      total = 0
      fetcher('https://agroserver-mdz5.onrender.com/data/cost/')
        .then((data) => {
          data.forEach(d => {
            total += parseInt(d.amount)
          })
          document.querySelector("#totalcost span").textContent = total
        })
      setTimeout(() => {
        document.querySelector("#totalcost span").textContent = "Total cost"
      }, 2000);
    })
    document.querySelector("#totalDue").addEventListener("click", () => {
      total = 0
      fetcher('https://agroserver-mdz5.onrender.com/data/due/')
        .then((data) => {
          data.forEach(d => {
            // console.log(d.amount)
            total += parseInt(d.amount)
          })
          document.querySelector("#totalDue span").textContent = total
        })
      setTimeout(() => {
        document.querySelector("#totalDue span").textContent = "Total Due"
      }, 2000);
    })

    document.querySelector("#addcostbtn").addEventListener("click", () => {
      document.querySelector("#homepage").style.display = "none"
      document.querySelector("#addcostpage").style.display = "flex"
      fetcher("https://agroserver-mdz5.onrender.com/data/cost/")
        .then(data => {
          totalcost = 0
          data.forEach((d) => {
            totalcost += parseInt(d.amount)
            table = document.querySelector("#costtablebody")
            rows = document.createElement("tr")
            table.classList.add("costtablebody")
            rows.innerHTML = `
              <td style="width: 85px; overflow-x: scroll; ">${d.date}</td>
              <td>${d.note}</td>
              <td>${d.amount}</td>
          `
            table.appendChild(rows)
          })
          document.querySelector("#totalcost2").textContent = `${totalcost ? totalcost : "loading.."}`
          document.querySelector("#refreshbtn").addEventListener("click", () => {
            // console.log("clicked 2")
            document.querySelector("#totalcost2").textContent = "loading.."
            fetcher("https://agroserver-mdz5.onrender.com/data/cost/")
              .then(data => {
                totalcost2 = 0
                data.forEach(d => {
                  totalcost2 += parseInt(d.amount)
                  document.querySelector("#totalcost2").textContent = `${totalcost2 ? totalcost2 : "loading.."}`
                  table = document.querySelector("#costtablebody")
                  rows = document.createElement("tr")
                  table.classList.add("costtablebody")
                  rows.innerHTML = `
                    <td style="width: 85px; overflow-x: scroll; ">${d.date}</td>
                    <td>${d.note}</td>
                    <td>${d.amount}</td>
          `
                  table.appendChild(rows)
                })
              })
          })


        })

    })
    document.querySelector("#addcostpagecancel").addEventListener("click", () => {
      document.querySelector("#homepage").style.display = "block"
      document.querySelector("#addcostpage").style.display = "none"
      document.querySelector("#costtablebody").innerHTML = ``
    })

    document.querySelector("#addsellbtn").addEventListener("click", () => {
      document.querySelector("#homepage").style.display = "none"
      document.querySelector("#addsellpage").style.display = "flex"
      totalSell = 0
      fetcher("https://agroserver-mdz5.onrender.com/data/sell/")
        .then((data) => {
          document.querySelector("#totalsellhappened").textContent = "loading.."
          // console.log(data)
          data.forEach((d) => {
            totalSell += parseInt(d.amount)
            let table = document.querySelector("#tablesell")
            let rows = document.createElement("tr")
            rows.innerHTML = `
          <td style="width: 85px; overflow-x: scroll; ">${d.date}</td>
          <td>${d.note}</td>
          <td>${d.buyerName}</td>
          <td>${d.productList}</td>
          <td>${d.amount}</td>
          `
            table.appendChild(rows)
            document.querySelector("#totalsellhappened").textContent = totalSell
          })

        })
      fetcher("https://agroserver-mdz5.onrender.com/data/products/")
        .then((data) => {
          selection = document.querySelector("#productselect")
          data.forEach((d) => {
            opt = document.createElement("option")
            opt.innerHTML = `
          <option value="${d.note}">${d.note}</option>
          `
            selection.appendChild(opt)
          })
        })

    })
    document.querySelector("#addsellpagecancel").addEventListener("click", () => {
      document.querySelector("#homepage").style.display = "block"
      document.querySelector("#addsellpage").style.display = "none"
      document.querySelector("#tablesell").innerHTML = ``
    })

    document.querySelector("#totalproductbtn").addEventListener("click", () => {
      document.querySelector("#homepage").style.display = "none";
      document.querySelector("#totalproductpage").style.display = "flex";

      fetcher("https://agroserver-mdz5.onrender.com/data/products/")
        .then((data) => {
          let tablebody = document.querySelector("#productlisttable");
          tablebody.innerHTML = ""; // clear old rows if any

          data.forEach(d => {
            const row = document.createElement("tr");
            row.classList.add("productpagetable");

            row.innerHTML = `
          <td style="padding: 5px; width: 80%;">${d.note}</td>
          <td style="padding: 5px;">
            <span id="amount-${d._id}">
              ${d.amount}
              <button id="btn-${d._id}">edit</button>
            </span>
          </td>
        `;

            tablebody.appendChild(row);

            bindEditButton(d); // bind edit logic per row
          });
        });
    });

    function bindEditButton(d) {
      const editBtn = document.querySelector(`#btn-${d._id}`);
      const amountSpan = document.querySelector(`#amount-${d._id}`);

      editBtn.addEventListener("click", () => {
        amountSpan.innerHTML = `
      <div style="display: flex; justify-content: center; align-items: center;">
        <input type="number" placeholder="Enter" value="${d.amount}" id="newAmount-${d._id}">
        <button id="save-${d._id}">Save</button>
        <button id="cancel-${d._id}">Cancel</button>
      </div>
    `;

        // Save
        document.querySelector(`#save-${d._id}`).addEventListener("click", () => {
          const newAmount = document.querySelector(`#newAmount-${d._id}`).value;
          console.log(newAmount)
          editor(`https://agroserver-mdz5.onrender.com/edit/products/${d._id}`, { amount: newAmount ? Number(newAmount) : 0 })
            .then(() => location.reload());
        });

        // Cancel
        document.querySelector(`#cancel-${d._id}`).addEventListener("click", () => {
          amountSpan.innerHTML = `
        ${d.amount}
        <button id="btn-${d._id}">edit</button>
      `;
          bindEditButton(d); // Re-bind the edit button again after cancel
        });
      });
    }

    document.querySelector("#totalproductbackbtn").addEventListener("click", () => {
      document.querySelector("#homepage").style.display = "block"
      document.querySelector("#totalproductpage").style.display = "none"
      document.querySelector("#productlisttable").innerHTML = ``
    })

    document.querySelector("#addduebtn").addEventListener("click", () => {
      document.querySelector("#homepage").style.display = "none"
      document.querySelector("#addduepage").style.display = "flex"
      document.querySelector("#totalsuespan").textContent = "loading.."
      totalDue = 0
      fetcher('https://agroserver-mdz5.onrender.com/data/due/')
        .then((data) => {
          data.forEach(d => {
            // console.log(d.amount)
            totalDue += parseInt(d.amount)
            rows = document.createElement("tr")
            rows.innerHTML = `
              <td style="overflow: auto; ">${d.date}</td>
              <td style="overflow: scroll; ">${d.note}</td>
              <td style="display:flex; justify-content:space-around;align-items:center; ">${d.amount} <button id="dueeditbtn">‚úèÔ∏è</button></td>
            `
            document.querySelector("#addduetable").appendChild(rows)
          })
          document.querySelector("#totalsuespan").textContent = totalDue
        })
    })
    document.querySelector("#addduepagecancel").addEventListener("click", () => {
      document.querySelector("#homepage").style.display = "block"
      document.querySelector("#addduepage").style.display = "none"
      document.querySelector("#addduetable").innerHTML = ``

    })

    document.querySelector("#settingbtn").addEventListener("click", () => {
      document.querySelector("#homepage").style.display = "none"
      document.querySelector("#settingpage").style.display = "flex"
    })
    document.querySelector("#settingpagecancelbtn").addEventListener("click", () => {
      document.querySelector("#homepage").style.display = "block"
      document.querySelector("#settingpage").style.display = "none"
    })

    document.querySelector("#notebtn").addEventListener("click", () => {
      document.querySelector("#homepage").style.display = "none"
      document.querySelector("#notepage").style.display = "flex"
      fetcher('https://agroserver-mdz5.onrender.com/data/note/')
        .then((data) => {
          data.forEach(d => {
            // console.log(d)
            let parent = document.querySelector("#notepadtablebody")
            let rows = document.createElement("tr")
            rows.innerHTML = `
                <td style="width:150px;">${d.date}</td>
                <td style="width:250px;">${d.title}</td>
                <td style="display:flex;justify-content:space-between; align-items:center;">${d.note} <button>edit</button> </td>
                `
            parent.appendChild(rows)
          })
        })
    })
    document.querySelector("#notepagecancelbtn").addEventListener("click", () => {
      document.querySelector("#homepage").style.display = "block"
      document.querySelector("#notepage").style.display = "none"
      document.querySelector("#notepadtablebody").innerHTML = ``
    })

    document.querySelector("#addnewproduct").addEventListener("click", () => {
      document.querySelector("#addproductpopup").style.display = "block"
    })
    document.querySelector("#newproductcencel").addEventListener("click", () => {
      document.querySelector("#addproductpopup").style.display = "none"
    })

    document.querySelector("#logoimg").addEventListener("dblclick", () => {
      let path = ""
      document.querySelector("#logoimg").style.display = "none"
      const inputimg = document.createElement("input")
      const cancelbtn55 = document.createElement("button")
      const donebtn = document.createElement("button")
      cancelbtn55.textContent = "Cancel"
      donebtn.textContent = "done"
      cancelbtn55.setAttribute("id", "cancelbtn55cancel")
      donebtn.setAttribute("id", "donebtn55")
      inputimg.setAttribute("id", "inputfile55")
      inputimg.setAttribute("type", "file")
      document.querySelector("#logocont").appendChild(cancelbtn55)
      document.querySelector("#logocont").appendChild(donebtn)
      document.querySelector("#logocont").appendChild(inputimg)
      inputimg.addEventListener("change", () => {
        const file = inputimg.files[0]
        if (file) {
          path = file.name
        }
        document.querySelector("#logoimg").setAttribute("src", `${path}`)
      })
      donebtn.addEventListener("click", () => {
        document.querySelector("#logoimg").style.display = "block"
        donebtn.style.display = "none"
        inputimg.style.display = "none"
        cancelbtn55.style.display = "none"
      })
    })

    document.querySelector("#histbank").addEventListener("click", () => {
      let b = document.querySelector("#alltimehistory")
      b.style.display = "block"
      b.appendChild(loader)

      fetcher("https://agroserver-mdz5.onrender.com/data/bank/")
        .then(data => {

          // console.log(data)
          totalAmount = 0
          data.forEach((item, index) => {
            totalAmount += parseInt(item.amount)
            let row = document.createElement("tr")
            row.style.width = "100%"
            row.innerHTML = `
          <td style="width: 85px; overflow-x: auto; ">${item.date}</td>
          <td style="overflow-x: auto; ">${item.note}</td>
          <td style="width: 85px; overflow-x: auto; ">${item.amount}</td>
          `
            document.querySelector("#histtable").appendChild(row)
            loader.style.display = "none"
          });

          document.querySelector("#totalbankamount").innerHTML = `<span>total amount: ${totalAmount ? totalAmount : "loading"}</span>`
        })
    })


    document.querySelector("#histcash").addEventListener("click", () => {
      let b = document.querySelector("#alltimehistory")
      b.style.display = "block"
      b.appendChild(loader)

      fetcher("https://agroserver-mdz5.onrender.com/data/cash/")
        .then(data => {

          // console.log(data)
          totalAmount = 0
          data.forEach((item, index) => {
            totalAmount += parseInt(item.amount)
            let row = document.createElement("tr")
            row.style.width = "100%"
            row.innerHTML = `
          <td style="width: 85px; overflow-x: auto; ">${item.date}</td>
          <td style="overflow-x: auto; ">${item.note}</td>
          <td style="width: 85px; overflow-x: auto; ">${item.amount}</td>
          `
            document.querySelector("#histtable").appendChild(row)
            loader.style.display = "none"
          });

          document.querySelector("#totalbankamount").innerHTML = `<span>total amount: ${totalAmount ? totalAmount : "loading"}</span>`
        })
    })
    document.querySelector("#histwithdraw").addEventListener("click", () => {
      let b = document.querySelector("#alltimehistory")
      b.style.display = "block"
      b.appendChild(loader)

      fetcher("https://agroserver-mdz5.onrender.com/data/withdraw/")
        .then(data => {

          // console.log(data)
          totalAmount = 0
          data.forEach((item, index) => {
            totalAmount += parseInt(item.amount)
            let row = document.createElement("tr")
            row.style.width = "100%"
            row.innerHTML = `
          <td style="width: 85px; overflow-x: auto; ">${item.date}</td>
          <td style="overflow-x: auto; ">${item.note}</td>
          <td style="width: 85px; overflow-x: auto; ">${item.amount}</td>
          `
            document.querySelector("#histtable").appendChild(row)
            loader.style.display = "none"
          });

          document.querySelector("#totalbankamount").innerHTML = `<span>total amount: ${totalAmount ? totalAmount : "loading"}</span>`
        })
    })


    document.querySelector("#histwithdraw").addEventListener("click", () => {
      document.querySelector("#alltimehistory").style.display = "block"
    })

    document.querySelector("#historycencel").addEventListener("click", () => {
      document.querySelector("#alltimehistory").style.display = "none"
      let tablerows = document.querySelector("#histtable")
      tablerows.innerHTML = ""

      loader.style.display = "flex"
    })



    // server codes

    document.querySelector("#addbankdata").addEventListener("click", () => {
      let date = document.querySelector("#bankdate").value;
      if (!date) {
        date = new Date().toISOString().replace('T', ', ').split('.')[0];
      }
      amount = document.querySelector("#bankamount").value;
      note = document.querySelector("#banknote").value;
      data = {
        "date": date,
        "amount": amount ? amount : 0,
        "note": note ? note : "No Note Added!!"
      }
      poster('https://agroserver-mdz5.onrender.com/insert/bank/', data)
    })

    document.querySelector("#addcashdata").addEventListener("click", () => {
      let date = document.querySelector("#addcashdate").value;
      if (!date) {
        date = new Date().toISOString().replace('T', ', ').split('.')[0];
      }
      amount = document.querySelector("#addcashamount").value;
      note = document.querySelector("#addcashnote").value;
      data = {
        "date": date,
        "amount": amount ? amount : 0,
        "note": note ? note : "No Note Added!!"
      }
      poster('https://agroserver-mdz5.onrender.com/insert/cash/', data)
    })

    document.querySelector("#addWithdraw").addEventListener("click", async () => {
      let date = document.querySelector("#withdrawdate").value;
      if (!date) {
        date = new Date().toISOString().replace('T', ', ').split('.')[0];
      }

      let amount = parseFloat(document.querySelector("#withdrawamount").value);
      let note = document.querySelector("#withdrawnote").value;
      let Wtype = document.querySelector("#SelectWithdraw").value;

      const data = {
        "date": date,
        "amount": isNaN(amount) ? 0 : amount,
        "note": note || "No Note Added!!",
        "withdrawType": Wtype || "cash"
      };

      try {
        const res = await poster('https://agroserver-mdz5.onrender.com/insert/withdraw/', data);
        if (res) {
          if (Wtype === "cash") {
            const wdata = {
              "date": date,
              "amount": -Math.abs(amount),
              "note": "Withdraw from cash"
            };
            await poster('https://agroserver-mdz5.onrender.com/insert/cash/', wdata);
          }
          if (Wtype === "bank") {
            const wdata = {
              "date": date,
              "amount": -Math.abs(amount),
              "note": "Withdraw from cash"
            };
            await poster('https://agroserver-mdz5.onrender.com/insert/bank/', wdata);
          }
        }

        else {
          console.error("Unexpected response:", res);
        }
      } catch (error) {
        console.error("Error in withdrawal:", error);
      }
    });

    document.querySelector("#addcostdata").addEventListener("click", async () => {
      let date = document.querySelector("#addcostdate").value;
      if (!date) {
        date = new Date().toISOString().replace('T', ', ').split('.')[0];
      }

      let amount = parseFloat(document.querySelector("#costaddamount").value);
      let note = document.querySelector("#costaddnote").value;
      let method = document.querySelector("#addcostmethod").value;

      const data = {
        "date": date,
        "amount": isNaN(amount) ? 0 : amount,
        "note": note || "No Note Added!!",
        "method": method || "cash"
      };

      try {
        const res = await poster('https://agroserver-mdz5.onrender.com/insert/cost/', data);

        if (res) {
          // Decrease from cash or bank
          const wdata = {
            "date": date,
            "amount": amount ? -Math.abs(amount) : 0.00,
            "note": "Cost deducted from cash/bank"
          };

          if (method === "cash") {
            await poster('https://agroserver-mdz5.onrender.com/insert/cash/', wdata);
          } else if (method === "bank") {
            await poster('https://agroserver-mdz5.onrender.com/insert/bank/', wdata);
          }

          // Show success message
          document.querySelector("#costaddsuccess").textContent = "Cost added successfully!!";
          document.querySelector("#costaddsuccess").style.color = "green";
          setTimeout(() => {
            document.querySelector("#costaddsuccess").textContent = "";
          }, 2000);
        } else {
          console.error("Unexpected response from cost insert:", res);
        }
      } catch (error) {
        console.error("Error in cost insert:", error);
      }
    });


    document.querySelector("#addselldata").addEventListener("click", async () => {
      let checkbox = document.querySelector("#discountedCheck")
      let date = document.querySelector("#selldate").value;
      if (!date) {
        date = new Date().toISOString().replace('T', ', ').split('.')[0];
      }

      let amount = parseFloat(document.querySelector("#totalamountrechived").value);
      let note = document.querySelector("#sellnote").value;
      let method = document.querySelector("#sellmethod").value;
      let buyerName = document.querySelector("#buyername").value;
      let eachprice = document.querySelector("#eachprice").value;
      let quantity = document.querySelector("#quantitysell").value;
      let productList = document.querySelector("#productselect").value;
      const data = {
        "method": method || "cash",
        "productList": productList ? productList : "Not Added",
        "date": date,
        "buyerName": buyerName ? buyerName : "Name not added",
        "note": note || "No sell Detals Added!!",
        "quantity": quantity ? quantity : 0,
        "eachprice": eachprice ? eachprice : 0.0,
        "amount": isNaN(amount) ? 0 : amount,

      };

      try {
        const res = await poster('https://agroserver-mdz5.onrender.com/insert/sell/', data);
        totalDue = 0
        document.querySelector("#totalsellhappened").textContent = "loading.."
        fetcher('https://agroserver-mdz5.onrender.com/data/sell/')
          .then((data) => {
            data.forEach(d => {
              // console.log(d.amount)
              totalDue += parseInt(d.amount)
            })
            document.querySelector("#totalsellhappened").textContent = totalDue
          })

        if (res) {
          let checkDue = parseInt(data.amount) - (parseInt(data.quantity) * parseInt(data.eachprice))
          // console.log(checkDue)
          let due = false
          if (checkDue < 0) {
            due = true
          }
          else {
            due = false
          }
          // Decrease from cash or bank
          const wdata = {
            "date": date,
            "amount": amount ? Math.abs(amount) : 0.00,
            "note": `Sell Added To ${method ? method : "cash"} for sell to ${buyerName ? buyerName : "Annonymous Buyer"} at ${date} || product: ${productList}, quantity: ${quantity}`
          };
          const wdata2 = {
            "date": date,
            "amount": due ? parseInt(Math.abs(checkDue)) : 0.00,
            "note": `Due Added From Sell To ${buyerName ? buyerName : "annonymous with method: " + method} || date : ${date}, product : ${productList}, quantity: ${quantity}`
          };

          if (method === "cash") {
            await poster('https://agroserver-mdz5.onrender.com/insert/cash/', wdata);
          } else if (method === "bank") {
            await poster('https://agroserver-mdz5.onrender.com/insert/bank/', wdata);
          }
          if (due && !checkbox.checked) {
            console.log(due, " ", checkbox.checked)
            await poster('https://agroserver-mdz5.onrender.com/insert/due/', wdata2);
          }

          // Show success message
          document.querySelector("#costaddsuccess").textContent = "Cost added successfully!!";
          document.querySelector("#costaddsuccess").style.color = "green";
          setTimeout(() => {
            document.querySelector("#costaddsuccess").textContent = "";
          }, 2000);
        } else {
          console.error("Unexpected response from cost insert:", res);
        }
      } catch (error) {
        console.error("Error in cost insert:", error);
      }
    });

    document.querySelector("#productaddlistbtn").addEventListener("click", () => {
      let date = document.querySelector("#bankdate").value;
      if (!date) {
        date = new Date().toISOString().replace('T', ', ').split('.')[0];
      }
      quanity = document.querySelector("#procutquantity").value;
      name = document.querySelector("#productname").value;
      data = {
        "date": date,
        "amount": quanity ? parseInt(quanity) : 0,
        "note": name ? name : "Annonymous Product"
      }
      poster('https://agroserver-mdz5.onrender.com/insert/products/', data)
    })

    document.querySelector("#addduedata").addEventListener("click", () => {
      let date = document.querySelector("#addduedate").value;
      if (!date) {
        date = new Date().toISOString().replace('T', ', ').split('.')[0];
      }
      note = document.querySelector("#addduenote").value;
      amount = document.querySelector("#adddueamount").value;
      data = {
        "date": date,
        "note": note ? note : "You didn't added a Name, should have",
        "amount": amount ? parseInt(amount) : 0
      }
      poster('https://agroserver-mdz5.onrender.com/insert/due/', data)
        .then(() => {
          totalDue = 0
          fetcher('https://agroserver-mdz5.onrender.com/data/due/')
            .then((data) => {
              data.forEach(d => {
                // console.log(d.amount)
                totalDue += parseInt(d.amount)
              })
              document.querySelector("#totalsuespan").textContent = totalDue
            })
        })

    })

    document.querySelector("#notedataaddbtn").addEventListener("click", () => {
      let date = document.querySelector("#notepadDate").value;
      if (!date) {
        date = new Date().toISOString().replace('T', ', ').split('.')[0];
      }
      title = document.querySelector("#notepadtitle").value;
      note = document.querySelector("#notepadnote").value;
      data = {
        "date": date,
        "title": title ? title : "No Title added",
        "note": note ? note : "You didn't added a Name, should have",
      }
      poster('https://agroserver-mdz5.onrender.com/insert/note/', data)
        .then(() => {
          document.querySelector("#notepadtablebody").innerHTML = ``
          fetcher('https://agroserver-mdz5.onrender.com/data/note/')
            .then((data) => {
              data.forEach(d => {
                // console.log(d.amount)
                let parent = document.querySelector("#notepadtablebody")
                let rows = document.createElement("tr")
                rows.innerHTML = `
                <td style="width:150px;">${d.date}</td>
                <td style="width:250px;">${d.title}</td>
                <td style="display:flex;justify-content:space-between; align-items:center;">${d.note} <button>edit</button> </td>
                `
                parent.appendChild(rows)
              })
            })
        })

    })















    // window.onload = () => {
    //   function editor(url, data) {
    //     return fetch(url, {
    //       method: 'PUT',
    //       headers: {
    //         'Content-Type': 'application/json',
    //       },
    //       body: JSON.stringify(data),
    //     })
    //       .then(response => {
    //         if (!response.ok) {
    //           throw new Error(`HTTP error! status: ${response.status}`);
    //         }
    //         return response.json();
    //       })
    //       .catch(error => {
    //         console.error("Error in PUT request:", error);
    //         throw error;
    //       });
    //   }
    //   // Test function to update a product's amount
    //   function testEditAmount(productId, newAmount) {
    //     const url = `https://agroserver-mdz5.onrender.com/edit/products/${productId}`;
    //     editor(url, { amount: newAmount })
    //       .then(data => {
    //         console.log("Update successful:", data);
    //         // You can add UI refresh logic here if needed
    //       })
    //       .catch(err => {
    //         console.error("Update failed:", err);
    //       });
    //   }

    //   // Example: update product with id '6880aa2be8e663834a78b484' to amount 42
    //   testEditAmount('6881f200ae622be213202bf4', 42000);
    // }





  </script>

</body>

</html>